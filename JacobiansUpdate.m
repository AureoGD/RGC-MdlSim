function [J_lf, J_rf, J_lh, J_rh] = JacobiansUpdate(q)


persistent J_foot_LF J_foot_RF J_foot_LH J_foot_RH

if isempty(J_foot_LF)
    J_foot_LF = zeros(3);
    J_foot_RF = zeros(3);
    J_foot_LH = zeros(3);
    J_foot_RH = zeros(3);
end

J_foot_LF(1,2) = (-0.40175 * cos(q(2) + q(3)) - 0.360e0 * cos(q(2)));
J_foot_LF(1,3) = -(0.40175 * cos(q(2) + q(3)));
J_foot_LF(2,1) = (-0.200875 * cos(q(1) - q(2) - q(3)) - 0.200875 * cos(q(1) + q(2) + q(3)) - 0.18 * cos(q(1) - q(2)) - 0.18 * cos(q(1) + q(2)) - 0.117e0 * sin(q(1)));
J_foot_LF(2,2) = (-0.200875 * cos(q(1) + q(2) + q(3)) + 0.200875 * cos(q(1) - q(2) - q(3)) - 0.18 * cos(q(1) + q(2)) + 0.18 * cos(q(1) - q(2)));
J_foot_LF(2,3) = (-0.200875 * cos(q(1) + q(2) + q(3)) + 0.200875 * cos(q(1) - q(2) - q(3)));
J_foot_LF(3,1) = (0.200875 * sin(q(1) - q(2) - q(3)) + 0.200875 * sin(q(1) + q(2) + q(3)) + 0.18 * sin(q(1) - q(2)) + 0.18 * sin(q(1) + q(2)) - 0.117e0 * cos(q(1)));
J_foot_LF(3,2) = (-0.200875 * sin(q(1) - q(2) - q(3)) + 0.200875 * sin(q(1) + q(2) + q(3)) - 0.18 * sin(q(1) - q(2)) + 0.18 * sin(q(1) + q(2)));
J_foot_LF(3,3) = (-0.200875 * sin(q(1) - q(2) - q(3)) + 0.200875 * sin(q(1) + q(2) + q(3)));

% J_foot_LF(1,1) = 0;
% J_foot_LF(1,2) = (-0.3800000000e0 * cos(q(2) + q(3)) - 0.360e0 * cos(q(2)));
% J_foot_LF(1,3) = -(0.3800000000e0 * cos(q(2) + q(3)));
% J_foot_LF(2,1) = (-0.1900000000e0 * cos(q(1) - q(2) - q(3)) - 0.1900000000e0 * cos(q(1) + q(2) + q(3)) - 0.1800000000e0 * cos(q(1) - q(2)) - 0.1800000000e0 * cos(q(1) + q(2)) - 0.117e0 * sin(q(1)));
% J_foot_LF(2,2) = (0.1900000000e0 * cos(q(1) - q(2) - q(3)) - 0.1900000000e0 * cos(q(1) + q(2) + q(3)) + 0.1800000000e0 * cos(q(1) - q(2)) - 0.1800000000e0 * cos(q(1) + q(2)));
% J_foot_LF(2,3) = (-0.1900000000e0 * cos(q(1) + q(2) + q(3)) + 0.1900000000e0 * cos(q(1) - q(2) - q(3)));
% J_foot_LF(3,1) = (0.1900000000e0 * sin(q(1) + q(2) + q(3)) + 0.1900000000e0 * sin(q(1) - q(2) - q(3)) + 0.1800000000e0 * sin(q(1) + q(2)) + 0.1800000000e0 * sin(q(1) - q(2)) - 0.117e0 * cos(q(1)));
% J_foot_LF(3,2) = (0.1900000000e0 * sin(q(1) + q(2) + q(3)) - 0.1900000000e0 * sin(q(1) - q(2) - q(3)) + 0.1800000000e0 * sin(q(1) + q(2)) - 0.1800000000e0 * sin(q(1) - q(2)));
% J_foot_LF(3,3) = (-0.1900000000e0 * sin(q(1) - q(2) - q(3)) + 0.1900000000e0 * sin(q(1) + q(2) + q(3)));


J_foot_RF(1,2) = (-0.40175 * cos(q(5) + q(6)) - 0.360e0 * cos(q(5)));
J_foot_RF(1,3) = -(0.40175 * cos(q(5) + q(6)));
J_foot_RF(2,1) = (0.200875 * cos(q(4) - q(5) - q(6)) + 0.200875 * cos(q(4) + q(5) + q(6)) + 0.18 * cos(q(4) - q(5)) + 0.18 * cos(q(4) + q(5)) + 0.117e0 * sin(q(4)));
J_foot_RF(2,2) = (-0.200875 * cos(q(4) - q(5) - q(6)) + 0.200875 * cos(q(4) + q(5) + q(6)) - 0.18 * cos(q(4) - q(5)) + 0.18 * cos(q(4) + q(5)));
J_foot_RF(2,3) = (0.200875 * cos(q(4) + q(5) + q(6)) - 0.200875 * cos(q(4) - q(5) - q(6)));
J_foot_RF(3,1) = (0.200875 * sin(q(4) + q(5) + q(6)) + 0.200875 * sin(q(4) - q(5) - q(6)) + 0.18 * sin(q(4) + q(5)) + 0.18 * sin(q(4) - q(5)) - 0.117e0 * cos(q(4)));
J_foot_RF(3,2) = (0.200875 * sin(q(4) + q(5) + q(6)) - 0.200875 * sin(q(4) - q(5) - q(6)) + 0.18 * sin(q(4) + q(5)) - 0.18 * sin(q(4) - q(5)));
J_foot_RF(3,3) = (-0.200875 * sin(q(4) - q(5) - q(6)) + 0.200875 * sin(q(4) + q(5) + q(6)));

% J_foot_RF(1,2) = (-0.3800000000e0 * cos(q(5) + q(6)) - 0.360e0 * cos(q(5)));
% J_foot_RF(1,3) = -(0.3800000000e0 * cos(q(5) + q(6)));
% J_foot_RF(2,1) = (0.1900000000e0 * cos(q(4) - q(5) - q(6)) + 0.1900000000e0 * cos(q(4) + q(5) + q(6)) + 0.1800000000e0 * cos(q(4) - q(5)) + 0.1800000000e0 * cos(q(4) + q(5)) + 0.117e0 * sin(q(4)));
% J_foot_RF(2,2) = (-0.1900000000e0 * cos(q(4) - q(5) - q(6)) + 0.1900000000e0 * cos(q(4) + q(5) + q(6)) - 0.1800000000e0 * cos(q(4) - q(5)) + 0.1800000000e0 * cos(q(4) + q(5)));
% J_foot_RF(2,3) = (0.1900000000e0 * cos(q(4) + q(5) + q(6)) - 0.1900000000e0 * cos(q(4) - q(5) - q(6)));
% J_foot_RF(3,1) = (0.1900000000e0 * sin(q(4) + q(5) + q(6)) + 0.1900000000e0 * sin(q(4) - q(5) - q(6)) + 0.1800000000e0 * sin(q(4) + q(5)) + 0.1800000000e0 * sin(q(4) - q(5)) - 0.117e0 * cos(q(4)));
% J_foot_RF(3,2) = (0.1900000000e0 * sin(q(4) + q(5) + q(6)) - 0.1900000000e0 * sin(q(4) - q(5) - q(6)) + 0.1800000000e0 * sin(q(4) + q(5)) - 0.1800000000e0 * sin(q(4) - q(5)));
% J_foot_RF(3,3) = (-0.1900000000e0 * sin(q(4) - q(5) - q(6)) + 0.1900000000e0 * sin(q(4) + q(5) + q(6)));

J_foot_LH(1,2) = (-0.40175 * cos(q(8) + q(9)) - 0.360e0 * cos(q(8)));
J_foot_LH(1,3) = -(0.40175 * cos(q(8) + q(9)));
J_foot_LH(2,1) = (-0.200875 * cos(q(7) - q(8) - q(9)) - 0.200875 * cos(q(7) + q(8) + q(9)) - 0.18 * cos(q(7) - q(8)) - 0.18 * cos(q(7) + q(8)) - 0.117e0 * sin(q(7)));
J_foot_LH(2,2) = (0.200875 * cos(q(7) - q(8) - q(9)) - 0.200875 * cos(q(7) + q(8) + q(9)) + 0.18 * cos(q(7) - q(8)) - 0.18 * cos(q(7) + q(8)));
J_foot_LH(2,3) = (-0.200875 * cos(q(7) + q(8) + q(9)) + 0.200875 * cos(q(7) - q(8) - q(9)));
J_foot_LH(3,1) = (0.200875 * sin(q(7) + q(8) + q(9)) + 0.200875 * sin(q(7) - q(8) - q(9)) + 0.18 * sin(q(7) + q(8)) + 0.18 * sin(q(7) - q(8)) - 0.117e0 * cos(q(7)));
J_foot_LH(3,2) = (0.200875 * sin(q(7) + q(8) + q(9)) - 0.200875 * sin(q(7) - q(8) - q(9)) + 0.18 * sin(q(7) + q(8)) - 0.18 * sin(q(7) - q(8)));
J_foot_LH(3,3) = (-0.200875 * sin(q(7) - q(8) - q(9)) + 0.200875 * sin(q(7) + q(8) + q(9)));

%   J_foot_LH(1,1) = 0;
%   J_foot_LH(1,2) = (-0.3800000000e0 * cos(q(8) + q(9)) - 0.360e0 * cos(q(8)));
%   J_foot_LH(1,3) = -(0.3800000000e0 * cos(q(8) + q(9)));
%   J_foot_LH(2,1) = (-0.1900000000e0 * cos(q(7) - q(8) - q(9)) - 0.1900000000e0 * cos(q(7) + q(8) + q(9)) - 0.1800000000e0 * cos(q(7) - q(8)) - 0.1800000000e0 * cos(q(7) + q(8)) - 0.117e0 * sin(q(7)));
%   J_foot_LH(2,2) = (0.1900000000e0 * cos(q(7) - q(8) - q(9)) - 0.1900000000e0 * cos(q(7) + q(8) + q(9)) + 0.1800000000e0 * cos(q(7) - q(8)) - 0.1800000000e0 * cos(q(7) + q(8)));
%   J_foot_LH(2,3) = (-0.1900000000e0 * cos(q(7) + q(8) + q(9)) + 0.1900000000e0 * cos(q(7) - q(8) - q(9)));
%   J_foot_LH(3,1) = (0.1900000000e0 * sin(q(7) + q(8) + q(9)) + 0.1900000000e0 * sin(q(7) - q(8) - q(9)) + 0.1800000000e0 * sin(q(7) + q(8)) + 0.1800000000e0 * sin(q(7) - q(8)) - 0.117e0 * cos(q(7)));
%   J_foot_LH(3,2) = (0.1900000000e0 * sin(q(7) + q(8) + q(9)) - 0.1900000000e0 * sin(q(7) - q(8) - q(9)) + 0.1800000000e0 * sin(q(7) + q(8)) - 0.1800000000e0 * sin(q(7) - q(8)));
%   J_foot_LH(3,3) = (-0.1900000000e0 * sin(q(7) - q(8) - q(9)) + 0.1900000000e0 * sin(q(7) + q(8) + q(9)));


J_foot_RH(1,2) = (-0.40175 * cos(q(11) + q(12)) - 0.360e0 * cos(q(11)));
J_foot_RH(1,3) = -(0.40175 * cos(q(11) + q(12)));
J_foot_RH(2,1) = (0.200875 * cos(q(10) - q(11) - q(12)) + 0.200875 * cos(q(10) + q(11) + q(12)) + 0.18 * cos(q(10) - q(11)) + 0.18 * cos(q(10) + q(11)) + 0.117e0 * sin(q(10)));
J_foot_RH(2,2) = (-0.200875 * cos(q(10) - q(11) - q(12)) + 0.200875 * cos(q(10) + q(11) + q(12)) - 0.18 * cos(q(10) - q(11)) + 0.18 * cos(q(10) + q(11)));
J_foot_RH(2,3) = (0.200875 * cos(q(10) + q(11) + q(12)) - 0.200875 * cos(q(10) - q(11) - q(12)));
J_foot_RH(3,1) = (0.200875 * sin(q(10) + q(11) + q(12)) + 0.200875 * sin(q(10) - q(11) - q(12)) + 0.18 * sin(q(10) + q(11)) + 0.18 * sin(q(10) - q(11)) - 0.117e0 * cos(q(10)));
J_foot_RH(3,2) = (0.200875 * sin(q(10) + q(11) + q(12)) - 0.200875 * sin(q(10) - q(11) - q(12)) + 0.18 * sin(q(10) + q(11)) - 0.18 * sin(q(10) - q(11)));
J_foot_RH(3,3) = (-0.200875 * sin(q(10) - q(11) - q(12)) + 0.200875 * sin(q(10) + q(11) + q(12)));

%  J_foot_RH(1,2) = (-0.3800000000e0 * cos(q(11) + q(12)) - 0.360e0 * cos(q(11)));
%  J_foot_RH(1,3) = -(0.3800000000e0 * cos(q(11) + q(12)));
%  J_foot_RH(2,1) = (0.1900000000e0 * cos(q(10) - q(11) - q(12)) + 0.1900000000e0 * cos(q(10) + q(11) + q(12)) + 0.1800000000e0 * cos(q(10) - q(11)) + 0.1800000000e0 * cos(q(10) + q(11)) + 0.117e0 * sin(q(10)));
%  J_foot_RH(2,2) = (-0.1900000000e0 * cos(q(10) - q(11) - q(12)) + 0.1900000000e0 * cos(q(10) + q(11) + q(12)) - 0.1800000000e0 * cos(q(10) - q(11)) + 0.1800000000e0 * cos(q(10) + q(11)));
%  J_foot_RH(2,3) = (0.1900000000e0 * cos(q(10) + q(11) + q(12)) - 0.1900000000e0 * cos(q(10) - q(11) - q(12)));
%  J_foot_RH(3,1) = (0.1900000000e0 * sin(q(10) + q(11) + q(12)) + 0.1900000000e0 * sin(q(10) - q(11) - q(12)) + 0.1800000000e0 * sin(q(10) + q(11)) + 0.1800000000e0 * sin(q(10) - q(11)) - 0.117e0 * cos(q(10)));
%  J_foot_RH(3,2) = (0.1900000000e0 * sin(q(10) + q(11) + q(12)) - 0.1900000000e0 * sin(q(10) - q(11) - q(12)) + 0.1800000000e0 * sin(q(10) + q(11)) - 0.1800000000e0 * sin(q(10) - q(11)));
%  J_foot_RH(3,3) = (-0.1900000000e0 * sin(q(10) - q(11) - q(12)) + 0.1900000000e0 * sin(q(10) + q(11) + q(12)));


J_lf = J_foot_LF;
J_rf = J_foot_RF;
J_lh = J_foot_LH;
J_rh = J_foot_RH;

end